<Window x:Class="LineHelper.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        Title="LineHelper - Marker Tracker"
        Height="450" Width="400"
        MinHeight="400" MinWidth="350"
        WindowStartupLocation="Manual"
        ResizeMode="CanResize"
        Background="#F5F5F5">

    <Grid Margin="15">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header with Settings Button -->
        <Grid Grid.Row="0" Margin="0,0,0,15">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <TextBlock Text="Marker Tracker"
                       FontSize="24"
                       FontWeight="SemiBold"
                       Foreground="#333333"/>

            <Button Grid.Column="1"
                    Name="SettingsButton"
                    Click="SettingsButton_Click"
                    Style="{StaticResource IconButton}"
                    ToolTip="Settings"
                    Width="32" Height="32">
                <Path Data="M12 15.5A3.5 3.5 0 0 1 8.5 12A3.5 3.5 0 0 1 12 8.5a3.5 3.5 0 0 1 3.5 3.5a3.5 3.5 0 0 1-3.5 3.5m7.43-2.53c.04-.32.07-.64.07-.97c0-.33-.03-.66-.07-1l2.11-1.63c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.3-.61-.22l-2.49 1c-.52-.39-1.06-.73-1.69-.98l-.37-2.65A.506.506 0 0 0 14 2h-4c-.25 0-.46.18-.5.42l-.37 2.65c-.63.25-1.17.59-1.69.98l-2.49-1c-.22-.08-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64L4.57 11c-.04.34-.07.67-.07 1c0 .33.03.65.07.97l-2.11 1.66c-.19.15-.25.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1.01c.52.4 1.06.74 1.69.99l.37 2.65c.04.24.25.42.5.42h4c.25 0 .46-.18.5-.42l.37-2.65c.63-.26 1.17-.59 1.69-.99l2.49 1.01c.22.08.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.66Z"
                      Fill="#666666"
                      Stretch="Uniform"
                      Width="20" Height="20"/>
            </Button>
        </Grid>

        <!-- Current Status Display -->
        <Border Grid.Row="1"
                Background="White"
                CornerRadius="8"
                Padding="15"
                Margin="0,0,0,15"
                BorderBrush="#E0E0E0"
                BorderThickness="1">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <Grid Grid.Row="0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <TextBlock Grid.Column="0" HorizontalAlignment="Center">
                        <Run Text="LINE IN: " FontWeight="SemiBold" Foreground="#666"/>
                        <Run Text="{Binding CurrentLineDisplay, Mode=OneWay}" FontWeight="Bold" FontSize="16" Foreground="#2196F3"/>
                    </TextBlock>

                    <TextBlock Grid.Column="1" HorizontalAlignment="Center">
                        <Run Text="LINE OUT: " FontWeight="SemiBold" Foreground="#666"/>
                        <Run Text="{Binding CurrentLoutDisplay, Mode=OneWay}" FontWeight="Bold" FontSize="16" Foreground="#FF9800"/>
                    </TextBlock>
                </Grid>

                <TextBlock Grid.Row="1"
                           Text="{Binding StatusMessage, Mode=OneWay}"
                           HorizontalAlignment="Center"
                           Margin="0,10,0,0"
                           FontStyle="Italic"
                           Foreground="#888888"/>
            </Grid>
        </Border>

        <!-- Main Buttons Area -->
        <Grid Grid.Row="2" Margin="0,10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="15"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- LINE IN Button with Adjustment Arrows -->
            <Grid Grid.Column="0">
                <Button Name="LineInButton"
                        Click="LineInButton_Click"
                        Style="{StaticResource MainActionButton}">
                    <Button.Background>
                        <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                            <GradientStop Color="#2196F3" Offset="0"/>
                            <GradientStop Color="#1976D2" Offset="1"/>
                        </LinearGradientBrush>
                    </Button.Background>
                    <StackPanel>
                        <TextBlock Text="LINE IN"
                                   FontSize="22"
                                   FontWeight="Bold"
                                   Foreground="White"
                                   HorizontalAlignment="Center"/>
                        <TextBlock Text="{Binding LineMarkerPreview, Mode=OneWay}"
                                   FontSize="14"
                                   Foreground="White"
                                   Opacity="0.9"
                                   Margin="0,5,0,0"
                                   HorizontalAlignment="Center"/>
                    </StackPanel>
                </Button>

                <!-- Decrement Arrow for Line In -->
                <Button Name="LineInDecrementButton"
                        Click="LineInDecrementButton_Click"
                        Style="{StaticResource DecrementButton}"
                        VerticalAlignment="Bottom"
                        HorizontalAlignment="Right"
                        Margin="0,0,5,5"
                        ToolTip="Decrement Line In">
                    <Path Data="M7 14l5-5 5 5z" Fill="White" Stretch="Uniform" Width="16" Height="16"
                          RenderTransformOrigin="0.5,0.5">
                        <Path.RenderTransform>
                            <RotateTransform Angle="180"/>
                        </Path.RenderTransform>
                    </Path>
                </Button>
            </Grid>

            <!-- LINE OUT Button with Adjustment Arrows -->
            <Grid Grid.Column="2">
                <Button Name="LineOutButton"
                        Click="LineOutButton_Click"
                        Style="{StaticResource MainActionButton}">
                    <Button.Background>
                        <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                            <GradientStop Color="#FF9800" Offset="0"/>
                            <GradientStop Color="#F57C00" Offset="1"/>
                        </LinearGradientBrush>
                    </Button.Background>
                    <StackPanel>
                        <TextBlock Text="LINE OUT"
                                   FontSize="22"
                                   FontWeight="Bold"
                                   Foreground="White"
                                   HorizontalAlignment="Center"/>
                        <TextBlock Text="{Binding LoutMarkerPreview, Mode=OneWay}"
                                   FontSize="14"
                                   Foreground="White"
                                   Opacity="0.9"
                                   Margin="0,5,0,0"
                                   HorizontalAlignment="Center"/>
                    </StackPanel>
                </Button>

                <!-- Decrement Arrow for Line Out -->
                <Button Name="LineOutDecrementButton"
                        Click="LineOutDecrementButton_Click"
                        Style="{StaticResource DecrementButton}"
                        VerticalAlignment="Bottom"
                        HorizontalAlignment="Right"
                        Margin="0,0,5,5"
                        ToolTip="Decrement Line Out">
                    <Path Data="M7 14l5-5 5 5z" Fill="White" Stretch="Uniform" Width="16" Height="16"
                          RenderTransformOrigin="0.5,0.5">
                        <Path.RenderTransform>
                            <RotateTransform Angle="180"/>
                        </Path.RenderTransform>
                    </Path>
                </Button>
            </Grid>
        </Grid>

        <!-- Progress Bar -->
        <ProgressBar Grid.Row="3"
                     Height="6"
                     Margin="0,10,0,5"
                     Maximum="{Binding MarkerRange, Mode=OneWay}"
                     Value="{Binding ProgressValue, Mode=OneWay}"
                     Foreground="#4CAF50"
                     Background="#E0E0E0"
                     BorderThickness="0"/>

        <!-- Footer with Reset and Keyboard Shortcuts -->
        <Grid Grid.Row="4" Margin="0,10,0,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <Button Grid.Column="0"
                    Name="ResetButton"
                    Click="ResetButton_Click"
                    Content="Reset"
                    Style="{StaticResource SecondaryButton}"
                    Width="80"/>

            <TextBlock Grid.Column="1"
                       HorizontalAlignment="Center"
                       VerticalAlignment="Center"
                       Foreground="#888">
                <Run Text="Keys: "/>
                <Run Text="{Binding LineInHotkeyDisplay, Mode=OneWay}" FontWeight="SemiBold"/>
                <Run Text=" / "/>
                <Run Text="{Binding LineOutHotkeyDisplay, Mode=OneWay}" FontWeight="SemiBold"/>
            </TextBlock>

            <TextBlock Grid.Column="2"
                       Text="{Binding RangeDisplay, Mode=OneWay}"
                       VerticalAlignment="Center"
                       Foreground="#888"/>
        </Grid>
    </Grid>
</Window>